{% extends 'jack/base.html' %}
{% block content %}
    <div class="ui container">
        <div class="ui two column stackable grid">
            <div class="column">
                <h2>Youtuberを探す</h2>
                <form class="ui form" method="POST">
                    {% csrf_token %}
                    <div class="two fields">
                        <div class="field">
                            {{ search_form.query }}
                        </div>
                        <div class="field">
                            <button class="ui button" name='search_channel' type="submit">検索</button>
                        </div>
                    </div>
                </form>
                {% for result in search_result %}
                    <div class='item'>
                        <img
                            class="ui circular image" 
                            src="{{ result.snippet.thumbnails.default.url }}" 
                            alt="{{ result.snippet.title }}" 
                        >
                        <h2 class="ui header">
                            {{ result.snippet.title }}
                            <div class="sub header">
                                {{ result.snippet.description}}
                            </div>
                        </h2>
                    </div>
                    <div class="ui divider"></div>
                {% endfor %}
            </div>

            <div class="column">
                <h2>おすすめYoutuber</h2>
                <form class="ui form" method="POST">
                    {% csrf_token %}
                    <div class="three fields">
                        <div class="field">
                            {{ form.channel_id }}
                        </div>
                        <div class="field">
                            {{ form.channel_nm }}
                        </div>
                        <div class="field">
                            <button class="ui button" name='add_channel' type="submit">追加</button>
                        </div>
                    </div>
                </form>
                {% if message %}
                    <p>{{ message }}</p>
                {% endif %}

                {% if channel_list %}        
                    {% for channel in channel_list %}
                        <h2>
                            <a href="{% url 'detail' channel.channel_id %}">
                                {{ channel.channel_nm }}
                            </a>
                        </h2>
                        <div class="ui divider"></div>
                    {% endfor %}
                {% else %}
                    <p class="ui message">No Recomended Youtuber.</p>
                {% endif %}      
            </div>
        </div>
    </div>
{% endblock %}
