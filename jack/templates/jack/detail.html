{% extends 'jack/base.html' %}
{% block content %}
    <h1>
        <a href="https://www.youtube.com/user/{{ channel.channel_id }}/" target="_blank">
            {{ channel.channel_nm }}
        </a>
    </h1>

    <h2>
        コメント        
    </h2>
    <form action="{% url 'comment' 'channel' channel.channel_id %}" method="POST">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">追加</button>
    </form>                    

    {% if channel.get_comment_list %}
        <ul>
            {% for comment in channel.get_comment_list %}
                <li>
                    {{ comment.comment }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <h2>
        おすすめ動画
    </h2>
    <form method="POST">
        {% csrf_token %}
        {{ video_form.as_p }}
        <button type="submit">追加</button>
    </form>
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}

    {% if video_list %}
        <ul>
            {% for video in video_list %}
                <li>
                    <a href="https://www.youtube.com/watch?v={{ video.video_id }}" target="_blank">
                        https://www.youtube.com/watch?v={{ video.video_id }}
                    </a>
                    <form action="{% url 'comment' 'video' video.video_id %}" method="POST">
                        {% csrf_token %}
                        {{ comment_form.as_p }}
                        <button type="submit">追加</button>
                    </form>
                    {% if video.get_comment_list %}
                        <ul>
                            {% for comment in video.get_comment_list %}
                                <li>
                                    {{ comment.comment }}
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
        {% endfor %}
        </ul>
    {% endif %}
{% endblock %}